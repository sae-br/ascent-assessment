{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Ascent Assessment{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
  <link rel="apple-touch-icon" href="{% static 'images/apple-touch-icon.png' %}">
  <script src="https://unpkg.com/lucide@latest"></script> <!--Lucide for Icons-->
</head>
<body class="dashboard-page">
  <div class="page-wrapper">
    
    {% include "includes/sidebar.html" %}
    
    <div class="main-area">
      {% include "includes/header.html" %}
      <main class="main-content">
        {% block content %}{% endblock %}
      </main>
    </div>
    
  </div>
  <script>lucide.createIcons();</script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <script>
    // Send Django's CSRF with every HTMX request
    document.body.addEventListener('htmx:configRequest', function (evt) {
      const name = 'csrftoken';
      const value = ('; ' + document.cookie).split('; ' + name + '=').pop()?.split(';').shift();
      if (value) evt.detail.headers['X-CSRFToken'] = value;
    });

    // Fade then remove any element marked with data-autofade (ms)
    document.body.addEventListener('htmx:afterSwap', function () {
      document.querySelectorAll('[data-autofade]').forEach(function (el) {
        const delay = parseInt(el.dataset.autofade, 10) || 5000; // default 5s
        setTimeout(() => {
          el.style.transition = 'opacity .6s';
          el.style.opacity = '0';
          setTimeout(() => el.remove(), 650);
        }, delay);
      });
    });
  </script>
</body>
</html>