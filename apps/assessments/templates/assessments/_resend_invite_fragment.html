{# This replaces the original form in place #}
<form
  method="post"
  action="{% url 'assessments:resend_invite' participant.id %}"
  hx-post="{% url 'assessments:resend_invite' participant.id %}"
  hx-target="closest form"
  hx-swap="outerHTML"
  class="resend-form"
  data-participant-id="{{ participant.id }}"
  style="display:inline"
>
  {% csrf_token %}
  <button type="submit" class="text-button">Resend Invite</button>
  <span class="message-slot" aria-live="polite" aria-atomic="true">
    <span
      class="sent-message"
      data-autofade
      style="--dur: 5s;"
      role="status"
    >Sent!</span>
  </span>
</form>

{# Update the participant's "Last Invite" cell out-of-band #}
<span id="last-invite-{{ participant.id }}" hx-swap-oob="true">
  {% with li=participant.last_invited_at|default:assessment.created_at %}
    {% if li %}
      {{ li|date:"M j, Y" }}
    {% else %}
      —
    {% endif %}
  {% endwith %}
</span>

{# Update the assessment meta "Last Invite Sent" out-of-band #}
<span id="assessment-last-invite" hx-swap-oob="true">
  {% if assessment.last_invite_sent %}
    {{ assessment.last_invite_sent|date:"F d, Y" }}
  {% else %}
    —
  {% endif %}
</span>