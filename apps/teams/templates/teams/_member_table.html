{% if team %}
  <h3>Team Members in {{ team.name }}</h3>
  <p>Editing a team that has already been assigned to an assessment will change the team 
    from this point forward. Closed assessments will not be affected.</p>
  <div class="table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% with rows=members|default:team.members.all %}
        {% for member in rows %}
          <tr>
            <form method="post">
              {% csrf_token %}
              <td>
                <input type="text" name="name" value="{{ member.name }}" required>
              </td>
              <td>
                <input type="email" name="email" value="{{ member.email }}" required>
              </td>
              <td class="text-right">
                <input type="hidden" name="member_id" value="{{ member.id }}">
                <button type="submit" name="edit_member" class="text-button">Update</button>
                &nbsp;|&nbsp;
                <button type="submit" name="delete_member" class="text-button"
                  onclick="return confirm('Are you sure you want to delete this member?')">Delete
                </button>
              </td>
            </form>
          </tr>
        {% empty %}
          <tr><td colspan="3">No members yet.</td></tr>
        {% endfor %}
        {% endwith %}        
      </tbody>
    </table>
  </div>

  <form method="post" class="form--extend-table">
    <p><em>Add New Member:</em></p>
    {% csrf_token %}
    <input type="hidden" name="selected_team" value="{{ team.id }}">
    <input type="text" name="name" placeholder="Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <button type="submit" name="add_member">Add</button>
  </form>

{% endif %}